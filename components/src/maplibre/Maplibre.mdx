import { Meta } from '@storybook/addon-docs/blocks';
import { Story, Primary, Controls, Stories } from '@storybook/addon-docs/blocks';
import * as MapStories from './Map/Map.stories.svelte';

<Meta title="Maplibre" />

# Maplibre

Lightweight svelte components and basemaps for rendering custom slippy maps using the [versatiles](https://docs.versatiles.org/) stack.

Based on [prior work](https://github.com/SWRdata/frontend_svelte_p012_spritpreise/blob/main/src/lib/components/Map/Map.svelte) from [Jakob Bauer](https://github.com/AgricolaJKB), [dimfield](https://github.com/dimfeld/svelte-maplibre) and [MIRUNE](https://github.com/MIERUNE/svelte-maplibre-gl).

<Story of={MapStories.Default} />

<br />

## Sources

- **[VectorTileSource](?path=/docs/maplibre-source-vectortilesource--docs)**: Loads a vector tile source supplied by a tileserver

## Layers

- **[VectorLayer](?path=/docs/maplibre-layer-vectorlayer--docs)**: Renders a layer from a vector tile source.

## Controls

- **[ScaleControl](?path=/docs/map-control-scalecontrol--docs)**: Renders a dynamic scalebar
- **[NavigationControl](?path=/docs/map-control-navigationcontrol--docs)**: Renders zoom buttons and optional compass
- **[GeocoderControl](?path=/docs/map-control-geocodercontrol--docs)**: Renders a search input using [maplibre-gl-geocoder](https://github.com/maplibre/maplibre-gl-geocoder) and any supported forward geocoding service (currently [maptiler](https://www.maptiler.com/) only)
- **[AttributionControl](?path=/docs/map-control-attributioncontrol--docs)**: Renders maplibre's default attribution control
- **[Custom controls](?path=/docs/maplibre-control-mapcontrol--docs)**: Renders arbitrary HTML inside maplibre's layout

## Misc

- **[Tooltip](?path=/docs/maplibre-tooltip--docs)**
- **[WithLinkLocation](?path=/docs/maplibre-extras-withlinklocation--docs)**: Derive the maps initial location from a URL parameter (includes forward geocoding)

## Styles

- **[SWR Data Lab Light](http://localhost:6006/?path=/docs/maplibre-style-swr-data-lab-light--docs)**: Light-themed basemap using SWR colours and typefaces
- Any valid MapLibre style specification, such as [versatiles-style](https://github.com/versatiles-org/versatiles-style) (see [demo](?path=/story/map-map--alternate-style))

## Known issues

- Firefox throws warning `WebGL warning: texImage: Alpha-premult and y-flip are deprecated for non-DOM-Element uploads`: Known [upstream mapligre-gl issue](https://github.com/maplibre/maplibre-gl-js/issues/2030) (safe to ignore)
